{% extends "base.html" %}

{% block title %}{{ task.title }} - Task Manager{% endblock %}

{% block header_title %}Task Details{% endblock %}
{% block header_subtitle %}{{ task.title }}{% endblock %}

{% block content %}
<div class="card">
    <div class="task-title" style="font-size: 1.5rem; margin-bottom: 1rem;">
        {% if task.completed %}[Completed]{% endif %}
        {{ task.title }}
    </div>
    
    <div class="task-meta" style="margin-bottom: 2rem; display: flex; gap: 0.5rem;">
        <span class="task-tag" style="background: {% if task.completed %}#28a745{% else %}#6c757d{% endif %}; color: white;">
            {% if task.completed %}Completed{% else %}Pending{% endif %}
        </span>
        <span class="task-tag" style="background: 
            {% if task.priority == 'high' %}#dc3545
            {% elif task.priority == 'low' %}#28a745
            {% else %}#ffc107{% endif %}; color: white;">
            {% if task.priority == 'high' %}ðŸ”´ High Priority
            {% elif task.priority == 'low' %}ðŸŸ¢ Low Priority
            {% else %}ðŸŸ¡ Medium Priority{% endif %}
        </span>
        <span class="task-tag" style="background: #667eea; color: white;">
            {% if task.category == 'work' %} Work{% elif task.category == 'personal' %} Personal{% elif task.category == 'school' %} School{% elif task.category == 'health' %} Health{% elif task.category == 'finance' %} Finance{% elif task.category == 'shopping' %} Shopping{% else %} General{% endif %}
        </span>
    </div>
    
    <div style="color: #6c757d; font-size: 0.9rem; margin-bottom: 2rem;">
        <p><strong>Created:</strong> {{ task.created_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
        {% if task.updated_at and task.updated_at != task.created_at %}
        <p><strong>Last Updated:</strong> {{ task.updated_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
        {% endif %}
    </div>
    
    <div class="task-actions">
        <a href="{{ url_for('edit_task', task_id=task._id) }}" class="btn btn-primary">
            Edit Task
        </a>
        {% if not task.completed %}
        <button onclick="toggleTask('{{ task._id }}')" class="btn btn-success">
            Mark Complete
        </button>
        {% endif %}
        <form method="POST" action="{{ url_for('delete_task', task_id=task._id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this task?')">
            <button type="submit" class="btn btn-danger">
                Delete Task
            </button>
        </form>
        <a href="{{ url_for('tasks') }}" class="btn btn-secondary">
            Back to Tasks
        </a>
    </div>
</div>
{% endblock %}
